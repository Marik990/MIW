<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Zadanie 2</title>

    <link rel="stylesheet" href="css/main.css" type="text/css">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
<header>
    <div class="title">Zadanie 2</div>
</header>
<main>
    <article>
        <section>

            <div class="upload-config">
                <form id="upload-config-form">
                    <label>
                        Załaduj plik konfiguracyjny:
                    </label>
                    <input id="config-file" type="file" name="configFile" style="padding-bottom: 10px">
                    <input id="upload-config-btn" type="button" value="Załaduj">
                </form>
            </div>

            <div class="upload-data" style="background-color: green">
                <form id="upload-data-form">
                    <label>
                        Wybierz plik z próbkami wzorcowymi:<br>
                    </label>
                    <input id="data-file" type="file" name="dataFile"><br><br>
                    <label>
                        Podaj dane do klasyfikacji:<br>
                    </label>
                    <textarea id="test-object" rows="4" cols="50" name="newObject" placeholder="atrybuty obiektu testowego" style="cursor: text;"></textarea>
                    <input id="metryka" type="text" name="metryka" placeholder="metryka" style="cursor: text; min-width: 100px; max-width: 40%; margin: 5px">
                    <input id="parametrK" type="text" name="parametrK" placeholder="parametr k" style="cursor: text; min-width: 100px; max-width: 40%; margin: 5px">
                    <input id="classification1-btn" type="button" value="klasyfikuj(I metoda)" style="margin: 5px">
                    <input id="classification2-btn" type="button" value="klasyfikuj(II metoda)" style="margin: 5px">
                </form>
            </div>

        </section>
        <section>
            <div class="board" id="board">

            </div>
        </section>
        <div class="bottom-panel" id="bottom-panel">
            <div class="back-btn" id="back-btn">
                <button>Wróć</button>
            </div>
            <div class="save-btn" id="save-txt-btn">
                <button>Zapisz jako txt</button>
            </div>
            <div class="save-btn" id="save-html-btn">
                <button>Zapisz jako HTML</button>
            </div>
            <div class="save-btn" id="save-json-btn">
                <button>Zapisz jako JSON</button>
            </div>
        </div>
    </article>
</main>

<script>
    
    function beginClassification1(rawTrainingSamples) {
        let normalizedDatasetTrainingSamples = []

        try {
            if(Config.Ready === false)
                throw new Error("Plik konfiguracyjny nie został załadowany!")

            const datasetTrainingSamples = createDataSet(rawTrainingSamples)
            checkDataSetIntegrity(datasetTrainingSamples)
            normalizedDatasetTrainingSamples = normalizeDataSet(datasetTrainingSamples)
        }
        catch (e) {
            alert(`Wystąpił błąd w trakcie wczytywania próbek wzorcowych: ${e.message}`)
            throw new Error(`${e.message}`)
        }


        //pobrać, stworzyć, sprawdzić i znormalizować obiekt testowy
        //pobrać nazwę metryki
        //pobrać parametr k
        classifyObjectKnnFirstMethod()
    }

    function beginClassification2(rawTrainingSamples) {

    }

    function classifyObjectKnnFirstMethod() {
        let assignedClass

        return assignedClass
    }

    function classifyObjectKnnSecondMethod() {
        let assignedClass

        return assignedClass
    }

    /*
Flow programu:
    I panel
        -wybierz plik konfiguracyjny
        -załaduj plik konfiguracyjny
    II panel
        -wybierz bazę próbek wzorcowych
        -wprowadź dane do klasyfikacji
            *podaj atrybuty obiektu do klasyfikacji(próbki testowej)
            *podaj parametr k
            *podaj metryke
        -rozpocznij klasyfikacje knn(I metoda)
        -lub rozpocznij klasyfikacje knn(II metoda)


     Naciśnięcie przycisku klasyfikacji:
        -pobierze surowe dane z pliku gdzie są próbki wzorcowe
        -stworzy poprawny, znormalizowany dataset z próbkami wzorcowymi w postaci tablicy dwuwymiarowej
        -pobierze surowe atrybuty obiektu testowego
        -stworzy poprawny, znormalizowany obiekt testowy w postaci tablicy jednowymiarowej
        -pobierze parametr k(dla I metody k nieparzyste)
        -pobierze metrykę

     Klasyfikacja I:
        -funkcja weźmie obiekt(tablica), metrykę, parametrK i bazę próbek(tablica dwuwymiarowa)
        -instrukcja switch wybierze funkcję metryki za pomocą której zostaną obliczone odległości do każdego obiektu z bazy danych
            *odległość będzie obliczana w pętli za pomocą pojedynczej funkcji metryki zwracającej odległość
            *wszystkie odległości do punktów oraz klasy tych punktów zostanę zapisane do oddzielnej tablicy
        -przeprowadź klasyfikację obiektu I metodą na podstawie tablicy odległości

     Klasyfikacja II:
        -funkcja weźmie obiekt(tablica), metrykę, parametrK i bazę próbek(tablica dwuwymiarowa)
        -instrukcja switch wybierze funkcję metryki za pomocą której zostaną obliczone odległości do każdego obiektu z bazy danych
            *odległość będzie obliczana w pętli za pomocą pojedynczej funkcji metryki zwracającej odległość
            *wszystkie odległości do punktów oraz klasy tych punktów zostanę zapisane do oddzielnej tablicy
        -przeprowadź klasyfikację obiektu II metodą na podstawie tablicy odległości

    Każda funkcja metryki:
        -musi przyjmować dwa obiekty i zwracać odpowiednią odległość ze wzoru

    Board:
        -wyświetl sklasyfikowany obiekt

    Dolny panel:
        -po staremu(chociaż JSONa można przerobić, żeby zapisywał sam obiekt)
     */
</script>
<script src="additionalScripts.js" type="text/javascript"></script>
<script src="zad1Scripts.js" type="text/javascript"></script>
</body>
</html>