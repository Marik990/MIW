<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Zadanie 5</title>

    <link rel="stylesheet" href="css/main.css" type="text/css">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
<header>
    <div class="title">Zadanie 5</div>
</header>
<main>
    <article>
        <section>
            <div class="upload-data">
                <input id="generate-btn" type="button" value="Generuj skrypt"></button>
            </div>
        </section>
        <section>
            <div class="board" id="board">
                Pusto
            </div>
        </section>
        <div class="bottom-panel" id="bottom-panel">
            <div class="back-btn" id="back-btn">
                <button>Wróć</button>
            </div>
        </div>
    </article>
</main>

<script>

    $('#generate-btn').on("click",function(){
        let gameGraph = new GameGraph([4, 5, 6], 21)
        document.getElementById("board").innerText = gameGraph.generateNormalScript()
    });

    function GameGraph(tokenValues, maxSum) {
        this.tokenValues = tokenValues
        this.maxSum = maxSum
        this.nodes = []
        this.links = []
        this.constructNormalGraph = function () {
            this.nodes.push(new Node(0, "prot", 0))
            this.tokenValues.forEach(function (tokenValue) {

            })
            this.links.push(new Link())
        }
        this.constructMinMaxGraph = function () {

        }
        this.generateNormalScript = function () {
            let script = "digraph G {\n"
            this.nodes.forEach(function (node) {
                script += node.generateScript()
            })
            this.links.forEach(function (link) {
                script += link.generateScript()
            })
            script += "}"
            return script
        }
        this.generateMinMaxScript = function () {
            let script = "digraph G {"

            script += "}"
            return script
        }
    }
    
    function Link(nodes, decisionValue, color) {
        this.nodes = nodes
        this.color = color
        this.decisionValue = decisionValue
        this.generateScript = function () {
            return `"${this.nodes[0].name}" -> "${this.nodes[1].name}" [label = "${this.decisionValue}" color = "${this.color}"]`
        }
    }
    
    function Node(id, player, sum) {
        this.id = id
        this.player = player
        this.name = this.player + this.id
        this.sum = sum
        this.generateScript = function () {
            if(this.sum > 21){
                if(this.player === "prot"){
                    return `"${this.name}" [label = "koniec;\\n wygrana"]`
                }
                else{
                    return `"${this.name}" [label = "koniec;\\n przegrana"]`
                }
            }
            else if(this.sum === 21){
                return `"${this.name}" [label = "koniec;\\n remis"]`
            }
            else{
                return `"${this.name}" [label = "${this.player};\\n suma=${this.sum}"]`
            }
        }
    }

</script>

<script src="additionalScripts.js" type="text/javascript"></script>
</body>
</html>